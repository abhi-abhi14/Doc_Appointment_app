{"ast":null,"code":"var _jsxFileName = \"C:\\\\hello\\\\Doctor-appointmnet-system-mern-project-14-final-code\\\\client\\\\src\\\\pages\\\\BookingPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport Layout from \"../components/Layout\";\nimport { useParams } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { DatePicker, message, TimePicker } from \"antd\";\nimport moment from \"moment\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { showLoading, hideLoading } from \"../redux/features/alertSlice\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BookingPage = () => {\n  _s();\n  const {\n    user\n  } = useSelector(state => state.user);\n  const params = useParams();\n  const [doctors, setDoctors] = useState([]);\n  const [date, setDate] = useState(\"\");\n  const [time, setTime] = useState();\n  const [isAvailable, setIsAvailable] = useState(false);\n  const dispatch = useDispatch();\n  // login user data\n  const getUserData = async () => {\n    try {\n      const res = await axios.post(\"/api/v1/doctor/getDoctorById\", {\n        doctorId: params.doctorId\n      }, {\n        headers: {\n          Authorization: \"Bearer \" + localStorage.getItem(\"token\")\n        }\n      });\n      if (res.data.success) {\n        setDoctors(res.data.data);\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  // ============ handle availiblity\n  const handleAvailability = async () => {\n    try {\n      dispatch(showLoading());\n      const res = await axios.post(\"/api/v1/user/booking-availbility\", {\n        doctorId: params.doctorId,\n        date,\n        time\n      }, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n        }\n      });\n      dispatch(hideLoading());\n      if (res.data.success) {\n        setIsAvailable(true);\n        console.log(isAvailable);\n        message.success(res.data.message);\n      } else {\n        message.error(res.data.message);\n      }\n    } catch (error) {\n      dispatch(hideLoading());\n      console.log(error);\n    }\n  };\n  // =============== booking func\n  const handleBooking = async () => {\n    try {\n      setIsAvailable(true);\n      if (!date && !time) {\n        return alert(\"Date & Time Required\");\n      }\n      dispatch(showLoading());\n      const res = await axios.post(\"/api/v1/user/book-appointment\", {\n        doctorId: params.doctorId,\n        userId: user._id,\n        doctorInfo: doctors,\n        userInfo: user,\n        date: date,\n        time: time\n      }, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n        }\n      });\n      dispatch(hideLoading());\n      if (res.data.success) {\n        message.success(res.data.message);\n      }\n    } catch (error) {\n      dispatch(hideLoading());\n      console.log(error);\n    }\n  };\n  useEffect(() => {\n    getUserData();\n    //eslint-disable-next-line\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Booking Page\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container m-2\",\n      children: doctors && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: [\"Dr.\", doctors.firstName, \" \", doctors.lastName]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: [\"Fees : \", doctors.feesPerCunsaltation]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: [\"Timings : \", doctors.timings && doctors.timings[0], \" -\", \" \", doctors.timings && doctors.timings[1], \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex flex-column w-50\",\n          children: [/*#__PURE__*/_jsxDEV(DatePicker, {\n            \"aria-required\": \"true\",\n            className: \"m-2\",\n            format: \"DD-MM-YYYY\",\n            onChange: value => {\n              setDate(moment(value).format(\"DD-MM-YYYY\"));\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(TimePicker, {\n            \"aria-required\": \"true\",\n            format: \"HH:mm\",\n            className: \"mt-3\",\n            onChange: value => {\n              setTime(moment(value).format(\"HH:mm\"));\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-primary mt-2\",\n            onClick: handleAvailability,\n            children: \"Check Availability\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-dark mt-2\",\n            onClick: handleBooking,\n            children: \"Book Now\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 102,\n    columnNumber: 5\n  }, this);\n};\n_s(BookingPage, \"yDRsIdNE2vtkZbiIKoT7TzaI/QY=\", false, function () {\n  return [useSelector, useParams, useDispatch];\n});\n_c = BookingPage;\nexport default BookingPage;\nvar _c;\n$RefreshReg$(_c, \"BookingPage\");","map":{"version":3,"names":["React","useState","useEffect","Layout","useParams","axios","DatePicker","message","TimePicker","moment","useDispatch","useSelector","showLoading","hideLoading","jsxDEV","_jsxDEV","BookingPage","_s","user","state","params","doctors","setDoctors","date","setDate","time","setTime","isAvailable","setIsAvailable","dispatch","getUserData","res","post","doctorId","headers","Authorization","localStorage","getItem","data","success","error","console","log","handleAvailability","handleBooking","alert","userId","_id","doctorInfo","userInfo","children","fileName","_jsxFileName","lineNumber","columnNumber","className","firstName","lastName","feesPerCunsaltation","timings","format","onChange","value","onClick","_c","$RefreshReg$"],"sources":["C:/hello/Doctor-appointmnet-system-mern-project-14-final-code/client/src/pages/BookingPage.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Layout from \"../components/Layout\";\nimport { useParams } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { DatePicker, message, TimePicker } from \"antd\";\nimport moment from \"moment\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { showLoading, hideLoading } from \"../redux/features/alertSlice\";\n\nconst BookingPage = () => {\n  const { user } = useSelector((state) => state.user);\n  const params = useParams();\n  const [doctors, setDoctors] = useState([]);\n  const [date, setDate] = useState(\"\");\n  const [time, setTime] = useState();\n  const [isAvailable, setIsAvailable] = useState(false);\n  const dispatch = useDispatch();\n  // login user data\n  const getUserData = async () => {\n    try {\n      const res = await axios.post(\n        \"/api/v1/doctor/getDoctorById\",\n        { doctorId: params.doctorId },\n        {\n          headers: {\n            Authorization: \"Bearer \" + localStorage.getItem(\"token\"),\n          },\n        }\n      );\n      if (res.data.success) {\n        setDoctors(res.data.data);\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  // ============ handle availiblity\n  const handleAvailability = async () => {\n    try {\n      dispatch(showLoading());\n      const res = await axios.post(\n        \"/api/v1/user/booking-availbility\",\n        { doctorId: params.doctorId, date, time },\n        {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n          },\n        }\n      );\n      dispatch(hideLoading());\n      if (res.data.success) {\n        setIsAvailable(true);\n        console.log(isAvailable);\n        message.success(res.data.message);\n      } else {\n        message.error(res.data.message);\n      }\n    } catch (error) {\n      dispatch(hideLoading());\n      console.log(error);\n    }\n  };\n  // =============== booking func\n  const handleBooking = async () => {\n    try {\n      setIsAvailable(true);\n      if (!date && !time) {\n        return alert(\"Date & Time Required\");\n      }\n      dispatch(showLoading());\n      const res = await axios.post(\n        \"/api/v1/user/book-appointment\",\n        {\n          doctorId: params.doctorId,\n          userId: user._id,\n          doctorInfo: doctors,\n          userInfo: user,\n          date: date,\n          time: time,\n        },\n        {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n          },\n        }\n      );\n      dispatch(hideLoading());\n      if (res.data.success) {\n        message.success(res.data.message);\n      }\n    } catch (error) {\n      dispatch(hideLoading());\n      console.log(error);\n    }\n  };\n\n  useEffect(() => {\n    getUserData();\n    //eslint-disable-next-line\n  }, []);\n  return (\n    <Layout>\n      <h3>Booking Page</h3>\n      <div className=\"container m-2\">\n        {doctors && (\n          <div>\n            <h4>\n              Dr.{doctors.firstName} {doctors.lastName}\n            </h4>\n            <h4>Fees : {doctors.feesPerCunsaltation}</h4>\n            <h4>\n              Timings : {doctors.timings && doctors.timings[0]} -{\" \"}\n              {doctors.timings && doctors.timings[1]}{\" \"}\n            </h4>\n            <div className=\"d-flex flex-column w-50\">\n              <DatePicker\n                aria-required={\"true\"}\n                className=\"m-2\"\n                format=\"DD-MM-YYYY\"\n                onChange={(value) => {\n                  setDate(moment(value).format(\"DD-MM-YYYY\"));\n                }}\n              />\n              <TimePicker\n                aria-required={\"true\"}\n                format=\"HH:mm\"\n                className=\"mt-3\"\n                onChange={(value) => {\n                  setTime(moment(value).format(\"HH:mm\"));\n                }}\n              />\n\n              <button\n                className=\"btn btn-primary mt-2\"\n                onClick={handleAvailability}\n              >\n                Check Availability\n              </button>\n\n              <button className=\"btn btn-dark mt-2\" onClick={handleBooking}>\n                Book Now\n              </button>\n            </div>\n          </div>\n        )}\n      </div>\n    </Layout>\n  );\n};\n\nexport default BookingPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}